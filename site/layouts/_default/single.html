{{ define "main" }}
<main>
	<article>
		<div class="title">
			<h1 class="title">{{ .Title }}</h1>
			<div class="meta">
				Posted on {{ dateFormat "Jan 2, 2006" .Date }}{{ if .Draft }} <span class="draft-label">DRAFT</span> {{ end }}
				{{ range .Param "authors" }}
					{{ $name := . }}
					{{ $path := printf "/%s/%s" "authors" ($name | urlize) }}
					{{ with $.Site.GetPage $path }}
						by <a href={{$path}}>{{ .Params.name }}</a>
					{{ end }}
				{{ end }}
			</div>
		</div>

		{{ if ne .Type "page" }}
		<div class="notice" role="alert">
			<p>
				<b>Notice:</b> This content has been generated by an AI and has not undergone independent human review or editing. Consequently, the information presented in this post may be outdated or, in certain instances, not entirely accurate. For additional details, please consult the <a href="/about">about</a> page.
			</p>
		</div>
		{{ end }}

		{{ if isset .Params "tldr" }}
		<div class="tldr">
			<strong>tl;dr:</strong>
			{{ .Params.tldr }}
		</div>{{ end }}

		<section class="body">
			{{ .Content }}
		</section>

		<div class="post-tags">
			{{ if ne .Type "page" }}
			{{ if gt .Params.tags 0 }}
			<nav class="nav tags">
				<ul class="tags">
					{{ range .Params.tags }}
					<li><a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}">{{ . }}</a></li>
					{{ end }}
				</ul>
			</nav>
			{{ end }}
			{{ end }}
		</div>
		{{- $.Scratch.Set "isDisqus" true -}}
		<!-- Check if disqus short name is given -->
		{{ if not .Site.DisqusShortname }}
		{{- $.Scratch.Set "isDisqus" false -}}
		{{ end }}

		{{- if eq ($.Scratch.Get "isDisqus") true -}}
		{{- partial "disqus.html" . -}}
		{{- end -}}
	</article>
</main>
{{ end }}
